--- original-docker-compose.yml	2025-12-18 01:00:50.599324932 -0600
+++ docker-compose.yml	2025-12-18 00:59:36.285126203 -0600
@@ -41,25 +47,34 @@
       - "${DATA_DIR}:/data"
       - "./blacklist/:/data/blacklist"
   whosonfirst:
-    image: pelias/whosonfirst:master
+    image: flyingdev/pelias-whosonfirst:master
     container_name: pelias_whosonfirst
     user: "${DOCKER_USER}"
+    environment:
+      - "PELIAS_OPENSEARCH=true"
+      - "OPENSEARCH_NODE=http://opensearch:9200"
     volumes:
       - "./pelias.json:/code/pelias.json"
       - "${DATA_DIR}:/data"
       - "./blacklist/:/data/blacklist"
   openstreetmap:
-    image: pelias/openstreetmap:master
+    image: flyingdev/pelias-openstreetmap:master
     container_name: pelias_openstreetmap
     user: "${DOCKER_USER}"
+    environment:
+      - "PELIAS_OPENSEARCH=true"
+      - "OPENSEARCH_NODE=http://opensearch:9200"
     volumes:
       - "./pelias.json:/code/pelias.json"
       - "${DATA_DIR}:/data"
       - "./blacklist/:/data/blacklist"
   openaddresses:
-    image: pelias/openaddresses:master
+    image: flyingdev/pelias-openaddresses:master
     container_name: pelias_openaddresses
     user: "${DOCKER_USER}"
+    environment:
+      - "PELIAS_OPENSEARCH=true"
+      - "OPENSEARCH_NODE=http://opensearch:9200"
     volumes:
       - "./pelias.json:/code/pelias.json"
       - "${DATA_DIR}:/data"
@@ -109,22 +127,15 @@
     volumes:
       - "./pelias.json:/code/pelias.json"
       - "${DATA_DIR}:/data"
-  elasticsearch:
-    image: pelias/elasticsearch:7.17.27
-    container_name: pelias_elasticsearch
-    user: "${DOCKER_USER}"
-    restart: always
-    ports: [ "127.0.0.1:9200:9200", "127.0.0.1:9300:9300" ]
-    volumes:
-      - "${DATA_DIR}/elasticsearch:/usr/share/elasticsearch/data"
-    ulimits:
-      memlock:
-        soft: -1
-        hard: -1
-      nofile:
-        soft: 65536
-        hard: 65536
-    cap_add: [ "IPC_LOCK" ]
+  opensearch:
+    image: flyingdev/opensearch:1.3.20
+    container_name: opensearch
+    environment:
+      - discovery.type=single-node
+      - cluster.name=docker-cluster
+    ports:
+      - "9200:9200"
+      - "9300:9300"
 
 
 
